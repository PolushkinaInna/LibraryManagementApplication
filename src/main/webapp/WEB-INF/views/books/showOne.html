<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>–ö–Ω–∏–≥–∞</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script>
        function moveBookDate() {
            alert("–¢–µ—Ä–º—ñ–Ω —á–∏—Ç–∞–Ω–Ω—è –∫–Ω–∏–≥–∏ –±—É–ª–æ –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–æ —â–µ –Ω–∞ 14 –¥–Ω—ñ–≤üòâ")
        }
    </script>
</head>
<body class="container">

<header style="background-color: #F8F8F8; border-radius: 5px">
    <br/>
    <div class="container"> <!-- –ú–µ–Ω—é -->
        <a class="btn btn-default" href="/">–°—Ç–∞—Ä—Ç–æ–≤–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞</a>
        <a class="btn btn-default" href="/books">–ö–Ω–∏–≥–∏</a>
        <a class="btn btn-default" href="/people">–ß–∏—Ç–∞—á—ñ</a>
        <a class="btn btn-default" href="/books/search">üîç –ü–æ—à—É–∫ –∫–Ω–∏–≥</a>
    </div>
    <br/>
</header>
<br/><hr><br/>
<div class="container">
    <h3>–°—Ç–æ—Ä—ñ–Ω–∫–∞ –∫–Ω–∏–≥–∏</h3>
    <p th:text="${'–ù–∞–∑–≤–∞: ' + book.getTitle()}" class="text-body">title</p>
    <p th:text="${'–ê–≤—Ç–æ—Ä: ' + book.getAuthor()}" class="text-body">author</p>
    <p th:text="${'–†—ñ–∫ –≤–∏–¥–∞–Ω–Ω—è: ' + book.getYearOfProduction()}" class="text-body">year of production</p>

    <form th:method="GET" th:action="@{/books/{id}/edit(id=${book.getBookId()})}">
        <input type="submit" value="–†–µ–¥–∞–≥—É–≤–∞—Ç–∏" class="btn btn-warning"/>
    </form>
    <br/><br/>
    <form th:method="DELETE" th:action="@{/books/{id}(id=${book.getBookId()})}">
        <input type="submit" value="–í–∏–¥–∞–ª–∏—Ç–∏ —Ü—é –∫–Ω–∏–≥—É" class="btn btn-danger"/>
    </form>
    <br/><br/>
    <div th:if="${bookOwner}" class="container">
        <!--<span th:text="${'–ó–∞—Ä–∞–∑ –∫–Ω–∏–≥–∞ —É ' + bookOwner.getFullName()}"></span>-->
        <span>–ó–∞—Ä–∞–∑ –∫–Ω–∏–≥–∞ —É <a th:text="${bookOwner.getFullName()}" th:href="@{/people/{id}(id=${bookOwner.getPersonId()})}">person</a></span>
        <p>–î–∞—Ç–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–Ω–∏–≥–∏ —á–∏—Ç–∞—á–µ–º <span th:text="${#dates.format(book.getTakenAt(), 'dd-MM-yyyy')}"></span>. –¢–µ—Ä–º—ñ–Ω —É—Ç—Ä–∏–º–∞–Ω–Ω—è 14 –¥–Ω—ñ–≤.</p>
        <br/>
        <form th:method="PATCH" th:action="@{/books/{id}/release(id=${book.getBookId()})}">
            <input type="submit" value="–ó–≤—ñ–ª—å–Ω–∏—Ç–∏ –∫–Ω–∏–≥—É" class="btn btn-primary"/>
        </form>
    </div>
    <br/><br/>
    <div th:if="${book.isExpired()}" class="container">
        <p style="color: orangered">–¢–µ—Ä–º—ñ–Ω —É—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–Ω–∏–≥–∏ –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–∏–π</p>
        <form th:method="PATCH" th:action="@{/books/{id}/move(id=${book.getBookId()})}" onsubmit="moveBookDate()">
            <input type="submit" value="–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ —Ç–µ—Ä–º—ñ–Ω —É—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–Ω–∏–≥–∏" class="btn btn-primary" />
        </form>
    </div>
    <div th:if="${people}">
        <span>–ö–Ω–∏–≥–∞ –≤—ñ–ª—å–Ω–∞. –ö–æ–º—É —ó—ó –Ω–∞–∑–Ω–∞—á–∏—Ç–∏ ?</span><br/>
        <form th:method="PATCH" th:action="@{/books/{id}/assign(id=${book.getBookId()})}">
            <select th:object="${person}" th:field="*{personId}" id="person" class="form-control">
                <option th:each="person: ${people}" th:value="${person.personId}" th:text="${person.getFullName()}"></option>
            </select>
            <br/>
            <input type="submit" value="–ù–∞–∑–Ω–∞—á–∏—Ç–∏ –∫–Ω–∏–≥—É" class="btn btn-primary"/>
        </form>

    </div>
</div>


<br/><br/><hr><br/><br/>

<a href="/books">–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ —Å–ø–∏—Å–∫—É –≤—Å—ñ—Ö –∫–Ω–∏–≥</a>

<br/><br/>
<footer>
    <div class="text-center p-3" style="background-color: #F8F8F8; border-radius: 5px">
        <br/>
        <p>2023 Copyright: By me</p>
        <br/>
    </div>
</footer>
</body>
</html>