<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>–ü–æ—à—É–∫ –∫–Ω–∏–≥</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script>
        function validateForm() {
            // –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∑–Ω–∞—á–µ–Ω—å –ø–æ–ª—ñ–≤ —Ñ–æ—Ä–º–∏
            var title = document.forms["searchForm"]["title"].value;
            var author = document.forms["searchForm"]["author"].value;
            var year = document.forms["searchForm"]["year"].value;

            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç—ñ –∑–Ω–∞—á–µ–Ω–Ω—è
            if (title === "" && author === "" && year === "") {
                alert("–ë—É–¥—å –ª–∞—Å–∫–∞, —Ö–æ—á–∞ –± –æ–¥–Ω–µ –ø–æ–ª–µ –≤ —Ñ–æ—Ä–º—ñ. üòâ");
                return false; // –ó–∞–±–æ—Ä–æ–Ω–∏—Ç–∏ –≤—ñ–¥–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º–∏
            }

            // –Ø–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è –Ω–µ –ø—É—Å—Ç—ñ, —Ñ–æ—Ä–º–∞ –º–æ–∂–µ –±—É—Ç–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–∞
            return true;
        }
    </script>
</head>
    <body class="container">
        <header style="background-color: #F8F8F8; border-radius: 5px">
            <br/>
            <div class="container"> <!-- –ú–µ–Ω—é -->
            <a class="btn btn-default" href="/">–°—Ç–∞—Ä—Ç–æ–≤–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞</a>
            <a class="btn btn-default" href="/books">–ö–Ω–∏–≥–∏</a>
            <a class="btn btn-default" href="/people">–ß–∏—Ç–∞—á—ñ</a>
                <a class="btn btn-default" href="/books/search">üîç –ü–æ—à—É–∫ –∫–Ω–∏–≥</a>
            </div>
            <br/>
        </header>
        <br/><hr><br/>
        <h3>–ü–æ—à—É–∫ –∫–Ω–∏–≥</h3>
        <form th:method="POST" th:action="@{/books/search}" name="searchForm" onsubmit="return validateForm()">
            <label for="title">–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –∫–Ω–∏–≥–∏</label>
            <input type="text" id="title" name="title" size="100"/>
            <br/>
            <label for="title">–í–≤–µ–¥—ñ—Ç—å –∞–≤—Ç–æ—Ä–∞ –∫–Ω–∏–≥–∏</label>
            <input type="text" id="author" name="author" size="100"/>
            <br/>
            <label for="year">–í–≤–µ–¥—ñ—Ç—å —Ä—ñ–∫ –≤–∏–¥–∞–Ω–Ω—è –∫–Ω–∏–≥–∏ </label>
            <input type="number" id="year" name="year" size="100"/>
            <br/>
            <input type="submit" value="–®—É–∫–∞—Ç–∏" class="btn btn-primary"/>
        </form>
        <br/><br/><hr><br/><br/>

        <div th:if="${books}" class="container">
            <div th:if="${books.isEmpty()}">
                <p>–ó–∞ –¥–∞–Ω–∏–º –∑–∞–ø–∏—Ç–æ–º –∫–Ω–∏–≥ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</p>
            </div>
            <div th:if="${!books.isEmpty()}">
                <p>–ö–Ω–∏–≥–∏ –ø–æ –≤–∞—à–æ–º—É –∑–∞–ø–∏—Ç—É: </p>
            </div>

            <table class="table">
                <tr th:each="book : ${books}">
                    <td>
                        <a th:href="@{/books/{id}(id=${book.getBookId()}) }"
                           th:text="${book.getTitle() + ', ' + book.getAuthor() + ', ' + book.getYearOfProduction()}">book</a>
                    </td>
                    <td th:if="${book.getAssignedPerson() == null}">
                        <span>–ö–Ω–∏–≥–∞ –≤—ñ–ª—å–Ω–∞</span>
                    </td>
                    <td th:if="${book.getAssignedPerson() != null}">
                        <span>–ó–∞—Ä–∞–∑ –∫–Ω–∏–≥–∞ —É <a th:href="@{/people/{id}(id=${book.getAssignedPerson().getPersonId()}) }" th:text="${book.getAssignedPerson().getFullName()}">person name</a></span>
                    </td>
                </tr>
            </table>
        </div>

        <br/><br/><hr><br/><br/>

        <a href="/books">–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ —Å–ø–∏—Å–∫—É –≤—Å—ñ—Ö –∫–Ω–∏–≥</a>

        <br/><br/>

        <br/><br/>
        <footer>
            <div class="text-center p-3" style="background-color: #F8F8F8; border-radius: 5px">
                <br/>
                <p>2023 Copyright: By me ·ìö·òè·ó¢</p>
                <br/>
            </div>
        </footer>
    </body>
</html>